"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["custom-bonus-system"],{9323:(t,e,i)=>{var s,n,r,o=i(6285);class a extends o.Z{init(){const t=document.getElementById("bonus-slider");t&&(this.applySlider(t),window.PluginManager.getPluginInstances("FormAjaxSubmit").forEach((t=>{t.$emitter.subscribe("onAfterAjaxSubmit",this.applySlider.bind(this))})))}applySlider(t){const{pointInput:e,pointDisplayOutput:i,btnRedeemPoints:s,sliderStart:n,sliderStep:r}=this.options;this.pointInput=document.querySelector(e),this.pointDisplayOutput=document.querySelector(i),this.btnRedeemPoints=document.querySelector(s);const o=parseInt(t.dataset.rangeMin),a=parseInt(t.dataset.rangeMax),l=parseFloat(document.getElementById("bonus--conversion-factor").value);noUiSlider.create(t,{start:a,connect:!0,tooltips:{to:function(e){return parseInt(e)+" P / "+(parseInt(e)*(1/l)).toFixed(2)+" "+t.dataset.currency}},step:r,range:{min:~~o,max:~~a}}),t.noUiSlider.on("update",((t,e)=>{const i=parseInt(t[e],10);(i*(1/l)).toFixed(2);i>0?this.btnRedeemPoints.classList.remove("invisible"):this.btnRedeemPoints.classList.add("invisible"),this.pointDisplayOutput.innerHTML=i,this.pointInput.value=i}))}}s=a,r={pointInput:"#bonus-slider-points",pointDisplayOutput:"#point-display-output",btnRedeemPoints:".btn-redeem-points",sliderStart:0,sliderStep:1},(n=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(n="options"))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r;var l=i(8254),c=i(5659);class u extends o.Z{init(){const{selectSelector:t,containerSelector:e,buyWidgetContainerSelector:i,buyWithPointsOnlyCheckboxSelector:s}=this.options;this._client=new l.Z,this.select=document.querySelector(t),this.container=document.querySelector(e),this.buyWidgetContainer=document.querySelector(i),this.buyWithPointsOnlyCheckbox=document.querySelector(s),this._registerEvents()}_registerEvents(){this.select.onchange=this._fetch.bind(this),this.buyWithPointsOnlyCheckbox&&(this.buyWithPointsOnlyCheckbox.onchange=this._fetchBuyWithPoints.bind(this))}_fetch(){if(this.container){const t=new URL(this.container.dataset.updatePointsUrl);t.searchParams.append("quantity",this.select.value),this.container.classList.add(this.options.containerIsLoadingClass),this._client.get(t.toString(),this._setContent.bind(this),"application/json",!0)}}_fetchBuyWithPoints(){if(this.buyWidgetContainer){c.Z.create();const t=new URL(this.buyWidgetContainer.dataset.buyWithPointsUrl);t.searchParams.append("state",this.buyWithPointsOnlyCheckbox.checked),this._client.get(`${t}`,(t=>{window.location.reload()}))}}_setContent(t){this.container.classList.remove(this.options.containerIsLoadingClass),this.container.innerHTML=JSON.parse(t).template}}!function(t,e,i){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(u,"options",{selectSelector:".product-detail-quantity-input",containerSelector:"#bonus-system-product-detail-points-ajax-container",containerIsLoadingClass:"bonus-system-is-loading",buyWidgetContainerSelector:"#bonus-system-product-detail-buy",buyWithPointsOnlyCheckboxSelector:"#buy-with-points-only-checkbox"});var h=i(3206),d=i(1966);class p extends o.Z{init(){this._getTriggers(),this._getTargets(),this._registerEvents()}_getTargets(){const t=h.Z.getDataAttribute(this.el,this.options.targetDataAttribute);this._targets=h.Z.querySelectorAll(this.el,t)}_getTriggers(){const t=h.Z.getDataAttribute(this.el,this.options.triggerDataAttribute);this._triggers=h.Z.querySelectorAll(this.el,t)}_registerEvents(){d.Z.iterate(this._triggers,(t=>{t.addEventListener("change",this._onChange.bind(this))}))}_onChange(t){const e=t.target.checked;d.Z.iterate(this._targets,(t=>{e?this._hideElement(t):this._showElement(t)}))}_showElement(t){this._replaceElementClass(t,this.options.hideClass,this.options.showClass)}_hideElement(t){this._replaceElementClass(t,this.options.showClass,this.options.hideClass),t.classList.contains(this.options.showClass)||t.classList.contains(this.options.hideClass)||t.classList.add(this.options.hideClass)}_replaceElementClass(t,e,i){t.classList.contains(e)&&t.classList.replace(e,i)}}!function(t,e,i){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(p,"options",{targetDataAttribute:"data-form-register-guest-hint-toggle-target",triggerDataAttribute:"data-custom-register-guest-hint-trigger-selector",showClass:"d-block",hideClass:"d-none"});const g=window.PluginManager;g.register("CustomBonusSystemRangeSlider",a,".bonus-system-redeem-points-container"),g.register("ProductQuantityBonusPoints",u,".product-detail-main"),g.register("RegisterGuestHint",p,"[data-custom-register-guest-hint]")}},t=>{t.O(0,["vendor-node","vendor-shared"],(()=>{return e=9323,t(t.s=e);var e}));t.O()}]);